<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–æ–∫–∞–ª—å–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f0f2f5;
        }

        header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .container {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .upload-area {
            border: 3px dashed #667eea;
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            margin: 20px 0;
            background: #f8f9fa;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upload-area:hover {
            background: #e9ecef;
            border-color: #764ba2;
        }

        #fileInput {
            display: none;
        }

        .upload-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 10px;
        }

        .upload-btn:hover {
            background: #764ba2;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .image-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .image-card:hover {
            transform: translateY(-5px);
        }

        .image-container {
            height: 200px;
            overflow: hidden;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .image-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .image-info {
            padding: 15px;
        }

        .image-name {
            font-weight: bold;
            margin-bottom: 5px;
            word-break: break-all;
            font-size: 0.9em;
        }

        .image-size {
            color: #666;
            font-size: 0.8em;
            margin-bottom: 10px;
        }

        .image-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            flex: 1;
            padding: 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .copy-btn {
            background: #28a745;
            color: white;
        }

        .delete-btn {
            background: #dc3545;
            color: white;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #666;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .gallery {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .gallery {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>üñºÔ∏è –õ–æ–∫–∞–ª—å–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h1>
        <p>–†–∞–±–æ—Ç–∞–µ—Ç –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚Ä¢ –ë–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞ ‚Ä¢ –ë–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–∫–∏</p>
    </header>

    <div class="container">
        <div class="upload-area" onclick="document.getElementById('fileInput').click()">
            <h3>üì§ –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</h3>
            <p>–ù–∞–∂–º–∏—Ç–µ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞</p>
            <p><small>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: JPG, PNG, GIF</small></p>
            <br>
            <button class="upload-btn">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã</button>
            <input type="file" id="fileInput" multiple accept=".jpg,.jpeg,.png,.gif" onchange="handleFileSelect(event)">
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="totalImages">0</div>
                <div>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalSize">0 KB</div>
                <div>–û–±—â–∏–π —Ä–∞–∑–º–µ—Ä</div>
            </div>
            <div class="stat-item">
                <div class="stat-value">Z‚ÜíA</div>
                <div>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</div>
            </div>
        </div>

        <div id="gallery" class="gallery"></div>
        
        <div id="noImages" class="empty-state">
            <h3>–ì–∞–ª–µ—Ä–µ—è –ø—É—Å—Ç–∞</h3>
            <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É—è –∫–Ω–æ–ø–∫—É –≤—ã—à–µ</p>
        </div>
    </div>

    <footer>
        <p>üí° –í—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–∞—à–µ–º –±—Ä–∞—É–∑–µ—Ä–µ</p>
        <p>üîÑ –î–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤, –Ω–∞—á–∏–Ω–∞—é—â–∏–µ—Å—è —Å –±—É–∫–≤ –∫–æ–Ω—Ü–∞ –∞–ª—Ñ–∞–≤–∏—Ç–∞</p>
    </footer>

    <script>
        // –ü—Ä–æ—Å—Ç–∞—è –≥–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        let images = [];
        const storageKey = 'simpleImageGallery';

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ localStorage
        function loadFromStorage() {
            try {
                const saved = localStorage.getItem(storageKey);
                if (saved) {
                    images = JSON.parse(saved);
                    console.log('–ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:', images.length);
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
                images = [];
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
        function saveToStorage() {
            try {
                localStorage.setItem(storageKey, JSON.stringify(images));
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error);
            }
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤
        function handleFileSelect(event) {
            const files = event.target.files;
            if (!files.length) return;

            processFiles(Array.from(files));
            event.target.value = '';
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤
        function processFiles(files) {
            const imageFiles = files.filter(file => 
                file.type.startsWith('image/') && 
                file.size <= 5 * 1024 * 1024 // 5MB –º–∞–∫—Å–∏–º—É–º
            );

            if (imageFiles.length === 0) {
                alert('–í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ 5MB (JPG, PNG, GIF)');
                return;
            }

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            showLoading();

            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            imageFiles.forEach(file => {
                addImage(file);
            });

            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            displayGallery();
            updateStats();
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º
            saveToStorage();
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function addImage(file) {
            const reader = new FileReader();
            
            reader.onload = function(e) {
                const imageData = {
                    id: Date.now() + Math.random(),
                    name: file.name,
                    size: file.size,
                    type: file.type,
                    data: e.target.result, // Data URL
                    date: new Date().toISOString()
                };

                // –î–æ–±–∞–≤–ª—è–µ–º –≤ –º–∞—Å—Å–∏–≤
                images.push(imageData);
                
                // –°–æ—Ä—Ç–∏—Ä—É–µ–º –æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É –ø–æ –∏–º–µ–Ω–∏
                sortImages();
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
                displayGallery();
                updateStats();
            };
            
            reader.readAsDataURL(file);
        }

        // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        function sortImages() {
            images.sort((a, b) => {
                return b.name.localeCompare(a.name);
            });
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–∏
        function displayGallery() {
            const gallery = document.getElementById('gallery');
            const noImages = document.getElementById('noImages');
            
            if (images.length === 0) {
                gallery.innerHTML = '';
                noImages.style.display = 'block';
                return;
            }
            
            noImages.style.display = 'none';
            gallery.innerHTML = '';
            
            images.forEach(image => {
                const card = createImageCard(image);
                gallery.appendChild(card);
            });
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function createImageCard(image) {
            const card = document.createElement('div');
            card.className = 'image-card';
            card.dataset.id = image.id;
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ä–∞–∑–º–µ—Ä
            const size = formatFileSize(image.size);
            
            card.innerHTML = `
                <div class="image-container">
                    <img src="${image.data}" alt="${image.name}" loading="lazy">
                </div>
                <div class="image-info">
                    <div class="image-name" title="${image.name}">
                        ${image.name}
                    </div>
                    <div class="image-size">
                        ${size}
                    </div>
                    <div class="image-actions">
                        <button class="action-btn copy-btn" onclick="copyImageLink('${image.id}')">
                            –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
                        </button>
                        <button class="action-btn delete-btn" onclick="deleteImage('${image.id}')">
                            –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </div>
                </div>
            `;
            
            return card;
        }

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏
        function copyImageLink(imageId) {
            const image = images.find(img => img.id == imageId);
            if (!image) return;
            
            navigator.clipboard.writeText(image.data).then(() => {
                alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');
            }).catch(err => {
                // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
                const textArea = document.createElement('textarea');
                textArea.value = image.data;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');
            });
        }

        // –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function deleteImage(imageId) {
            if (!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ?')) return;
            
            const index = images.findIndex(img => img.id == imageId);
            if (index !== -1) {
                images.splice(index, 1);
                displayGallery();
                updateStats();
                saveToStorage();
            }
        }

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            const totalImages = document.getElementById('totalImages');
            const totalSize = document.getElementById('totalSize');
            
            totalImages.textContent = images.length;
            
            const totalBytes = images.reduce((sum, img) => sum + img.size, 0);
            totalSize.textContent = formatFileSize(totalBytes);
        }

        // –ü–æ–∫–∞–∑ –∑–∞–≥—Ä—É–∑–∫–∏
        function showLoading() {
            const gallery = document.getElementById('gallery');
            gallery.innerHTML = `
                <div style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                    <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                </div>
            `;
        }

        // Drag and drop
        function setupDragAndDrop() {
            const dropZone = document.querySelector('.upload-area');
            if (!dropZone) return;
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, preventDefaults, false);
            });
            
            ['dragenter', 'dragover'].forEach(eventName => {
                dropZone.addEventListener(eventName, () => {
                    dropZone.style.background = '#e9ecef';
                }, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                dropZone.addEventListener(eventName, () => {
                    dropZone.style.background = '#f8f9fa';
                }, false);
            });
            
            dropZone.addEventListener('drop', (e) => {
                const files = e.dataTransfer.files;
                if (files.length) {
                    processFiles(Array.from(files));
                }
            }, false);
        }

        function preventDefaults(e) {
            e.preventDefault();
            e.stopPropagation();
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        function init() {
            loadFromStorage();
            displayGallery();
            updateStats();
            setupDragAndDrop();
        }

        // –ó–∞–ø—É—Å–∫
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>